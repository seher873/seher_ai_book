<svg width="800" height="500" xmlns="http://www.w3.org/2000/svg">
  <style>
    .title { font: bold 18px sans-serif; }
    .node { fill: #2196F3; stroke: #0D47A1; stroke-width: 2; }
    .topic { fill: #FFC107; stroke: #FF8F00; stroke-width: 2; }
    .service { fill: #E91E63; stroke: #AD1457; stroke-width: 2; }
    .action { fill: #9C27B0; stroke: #6A1B9A; stroke-width: 2; }
    .arrow { stroke: #000; stroke-width: 2; marker-end: url(#arrowhead); }
    .text { font: 14px sans-serif; text-anchor: middle; }
    .label { font: 12px sans-serif; }
  </style>
  
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" 
      refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#000" />
    </marker>
  </defs>
  
  <text x="400" y="25" class="title" text-anchor="middle">ROS2 Communication Model</text>
  
  <!-- Nodes -->
  <rect x="50" y="100" width="120" height="80" rx="10" class="node"/>
  <text x="110" y="130" class="text" fill="white">Node A</text>
  <text x="110" y="150" class="text" fill="white" font-size="12">Publisher</text>
  
  <rect x="50" y="320" width="120" height="80" rx="10" class="node"/>
  <text x="110" y="350" class="text" fill="white">Node B</text>
  <text x="110" y="370" class="text" fill="white" font-size="12">Subscriber</text>
  
  <rect x="630" y="100" width="120" height="80" rx="10" class="node"/>
  <text x="690" y="130" class="text" fill="white">Node C</text>
  <text x="690" y="150" class="text" fill="white" font-size="12">Service</text>
  <text x="690" y="170" class="text" fill="white" font-size="12">Server</text>
  
  <rect x="630" y="320" width="120" height="80" rx="10" class="node"/>
  <text x="690" y="350" class="text" fill="white">Node D</text>
  <text x="690" y="370" class="text" fill="white" font-size="12">Service</text>
  <text x="690" y="390" class="text" fill="white" font-size="12">Client</text>
  
  <!-- Topic -->
  <ellipse cx="400" cy="200" rx="60" ry="30" class="topic"/>
  <text x="400" y="205" class="text" fill="black">/topic_name</text>
  <text x="400" y="225" class="text" fill="black" font-size="12">Message Type</text>
  
  <!-- Service -->
  <rect x="400" y="340" width="80" height="40" class="service"/>
  <text x="440" y="365" class="text" fill="white">/service_name</text>
  <text x="440" y="380" class="text" fill="white" font-size="12">Request/Response</text>
  
  <!-- Action -->
  <rect x="350" y="420" width="100" height="40" class="action"/>
  <text x="400" y="445" class="text" fill="white">Action Interface</text>
  <text x="400" y="460" class="text" fill="white" font-size="12">Goal/Feedback/Result</text>
  
  <!-- Arrows for Topic Communication -->
  <line x1="170" y1="140" x2="340" y2="200" class="arrow"/>
  <text x="250" y="160" class="label">Publish</text>
  
  <line x1="340" y1="200" x2="170" y2="360" class="arrow"/>
  <text x="250" y="330" class="label">Subscribe</text>
  
  <!-- Arrows for Service Communication -->
  <line x1="630" y1="360" x2="480" y2="360" class="arrow"/>
  <text x="560" y="345" class="label">Request</text>
  
  <line x1="480" y1="380" x2="630" y2="380" class="arrow"/>
  <text x="560" y="400" class="label">Response</text>
  
  <!-- Arrows for Action Communication -->
  <line x1="170" y1="160" x2="350" y2="440" class="arrow"/>
  <text x="250" y="290" class="label">Goal</text>
  
  <line x1="450" y1="440" x2="630" y2="360" class="arrow"/>
  <text x="550" y="420" class="label">Feedback/Result</text>
  
  <!-- Legend -->
  <rect x="20" y="420" width="160" height="70" fill="none" stroke="black"/>
  <text x="100" y="435" class="text" font-weight="bold">Legend</text>
  <rect x="30" y="445" width="15" height="10" class="node"/>
  <text x="55" y="455" class="label" text-anchor="start">Node</text>
  <rect x="30" y="460" width="15" height="10" class="topic"/>
  <text x="55" y="470" class="label" text-anchor="start">Topic (pub/sub)</text>
  <rect x="30" y="475" width="15" height="10" class="service"/>
  <text x="55" y="485" class="label" text-anchor="start">Service (req/resp)</text>
</svg>